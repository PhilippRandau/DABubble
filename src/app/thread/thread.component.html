
    <header>
        <div class="header_content">
            <span>Thread</span>
            <span># Entwicklerteam</span>
            <div>
                <img (click)="closeThread(false)" src="/assets/img/icons/close.png" alt="">
            </div>
        </div>
    </header>


    <div class="thread_content">
        <div class="message_div">
            <div class="bottom_line" *ngIf="fsDataThreadService.comments?.length > 0">
                <div>
                    <span>{{fsDataThreadService.comments.length}} Antwort</span>
                    <div *ngIf="fsDataThreadService.comments?.length > 1">en</div>
                </div>

                <div class="line"></div>
            </div>
            <div (click)="openEmojiPicker(-1)" (click)="stopPropagation($event)" class="reaction_emojy">
                <div class="emojy"><img src="/assets/img/icons/add_reaction.png" alt=""></div>
            </div>
            <img src="/assets/img/small_avatar/avatar_1.svg" alt="">
            <div class="message_sub">
                <div class="user_time">
                    <span>User Name</span>
                    <span>Uhrzeit</span>
                </div>
                <div class="message">{{fsDataThreadService.current_message}}</div>
                <div class="emoji_main">
                    <div *ngFor="let item of 0" class="emoji_count" matTooltip="{{react_user}} hat reagiert">
                        <ngx-emoji class="center" [emoji]="" size="24"></ngx-emoji>
                        <span></span>
                    </div>
                </div>
            </div>
            <emoji-mart [class.d_block]="emojiPicker_open && picker_index == -1" class="emoji_picker"
                (emojiClick)="addEmojiToMessage($event)"
                [style]="{ position: 'absolute', top: '0px', right: '0px' }"></emoji-mart>
        </div>


        <div class="comment_div"
            [class.row_reverse]="getUserName(fsDataThreadService.comments[i].uid) == authenticationService.userData.user_name" *ngFor="let comment of fsDataThreadService.comments; let i = index">
            <div [class.show_edit_comment]="edit_comment && getUserName(fsDataThreadService.comments[i].uid) == authenticationService.userData.user_name && edit_comment_index == i" class="edit_comment" (click)="openEditComment(i)">
                <div class="menu_button" (click)="openEditComment(i)" (click)="stopPropagation($event)">
                    <span>Nachricht bearbeiten</span>
                </div>
                <div class="menu_button" (click)="openDeleteComment(i)" (click)="stopPropagation($event)">
                    <span>Nachricht löschen</span>
                </div>
            </div>
            <emoji-mart [class.d_block]="emojiPicker_open && picker_index == i" class="emoji_picker"
                (emojiClick)="addEmojiInThread($event, i)"
                [style]="{ position: 'absolute', top: '0px', left: '0px' }"></emoji-mart>
            <div *ngIf="getUserName(fsDataThreadService.comments[i].uid) != authenticationService.userData.user_name"
                (click)="openEmojiPicker(i)" (click)="stopPropagation($event)" class="reaction_emojy">
                <div class="emojy"><img src="/assets/img/icons/add_reaction.png" alt=""></div>
            </div>
            <div *ngIf="getUserName(fsDataThreadService.comments[i].uid) == authenticationService.userData.user_name"
                (click)="openEmojiPicker(i)" (click)="stopPropagation($event)" class="reaction_emojy_user">
                <div class="emojy">
                    <img src="/assets/img/icons/add_reaction.png" alt="">
                </div>
                <div class="emojy" (click)="openEditCommentMenu(i)" (click)="stopPropagation($event)">
                    <img src="/assets/img/icons/more_vert.png">
                </div>
            </div>
            <img class="avatar_img" [src]="getImageUrl(fsDataThreadService.comments[i].uid)">
            <div class="message_sub">
                <div class="user_time">
                    <span (click)="openProfile(fsDataThreadService.comments[i].uid)" >{{getUserName(fsDataThreadService.comments[i].uid)}}</span>
                    <span>{{fsDataThreadService.getTimeSince(fsDataThreadService.comments[i].time.seconds)}}</span>
                </div>
                <div class="message"
                    [class.message_user]="getUserName(fsDataThreadService.comments[i].uid) == authenticationService.userData.user_name">
                    {{fsDataThreadService.comments[i].comment}}
                    <div *ngIf="fsDataThreadService.comments[i].text_edited">(bearbeitet)</div>
                </div>
                <div class="emoji_main">
                    <div *ngFor="let emoji of fsDataThreadService.comments[i].emoji_data; let j = index"
                        (mouseenter)="showReactUsers(i, j)" (mouseleave)="closeShowReactUsers(i, j)" class="emoji_count"
                        (click)="addOrRemoveEmojIinThread(i, j)">
                        <div class="react_user"
                            [class.show_react_user]="comment_index == i && emoji_index == j && hovered_emoji">
                            <ngx-emoji class="center" [emoji]="fsDataThreadService.comments[i].emoji_data[j].emoji"
                                size="24"></ngx-emoji>
                            <span>{{fsDataThreadService.comments[i].emoji_data[j]?.react_users?.join(' und ')}}</span>
                            <div *ngIf="fsDataThreadService.comments[i].emoji_data[j]?.react_users?.length < 2">hat
                                reagiert</div>
                            <div *ngIf="fsDataThreadService.comments[i].emoji_data[j]?.react_users?.length > 1">haben
                                reagiert</div>
                        </div>
                        <ngx-emoji class="center" [emoji]="fsDataThreadService.comments[i].emoji_data[j].emoji"
                            size="24"></ngx-emoji>
                        <span>{{fsDataThreadService.comments[i].emoji_data[j].count}}</span>
                    </div>
                </div>
            </div>
        </div>


        <div class="type_message">
            <div [class.show_edit_comment]="open_attachment_menu" class="edit_comment">
                <input id="fileInput" type="file" (change)="fsDataThreadService.onFileSelected($event)" >
                <label class="menu_button" for="fileInput">Datei anhängen</label>
            </div>
            <div class="at_user_div" *ngIf="open_users">
                <div>
                    <div class="user" *ngFor="let user of authenticationService.all_users; let i = index" (click)="addUserToTextarea(i)" >
                        <img class="user_img" [src]="authenticationService.all_users[i].avatar">
                        <div>{{authenticationService.all_users[i].user_name}}</div>
                    </div>
                </div>
                
            </div>
            <div class="z_index">
                <emoji-mart [class.d_block]="emojiPicker_open && picker_index == -2" class="emoji_picker"
                    (emojiClick)="addEmojitoTextarea($event)"></emoji-mart>
            </div>
            <textarea #messageTextarea type="text" [(ngModel)]="comment_value" placeholder="Antworten..."></textarea>
            <div class="icons_main">
                <div class="icons">
                    <div class="plus" (click)="openAttachmentMenu()" (click)="stopPropagation($event)">
                        <div class="hover"><img src="/assets/img/icons/add.png" alt=""></div>
                    </div>
                    <div class="hover"><img src="/assets/img/icons/sentiment_satisfied.png"
                            (click)="openEmojiPicker(-2)" (click)="stopPropagation($event)"></div>
                    <div class="hover"><img src="/assets/img/icons/alternate_email.png" (click)="openUsers()" (click)="stopPropagation($event)"></div>
                </div>
            </div>
            <img [class.inactive]="comment_value.length < 1" class="send_button" src="/assets/img/icons/send (1).png"
                alt="" (click)="postComment()">
        </div>
    </div>

   
