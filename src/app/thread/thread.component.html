
    <header>
        <div class="header_content">
            <span>Thread</span>
            <span># Entwicklerteam</span>
            <div>
                <img (click)="closeThread(false)" src="/assets/img/icons/close.png" alt="">
            </div>
        </div>
    </header>


    <div class="thread_content">
        <div class="message_div">
            <div class="bottom_line" *ngIf="fsDataThreadService.comments.length > 0">
                <div>
                    <span>{{fsDataThreadService.comments.length}} Antwort</span>
                    <div *ngIf="fsDataThreadService.comments?.length > 1">en</div>
                </div>

                <div class="line"></div>
            </div>
            <div (click)="openEmojiPicker(-1)" (click)="stopPropagation($event)" class="reaction_emojy">
                <div class="emojy"><img src="/assets/img/icons/add_reaction.png" alt=""></div>
            </div>
            <img src="/assets/img/small_avatar/avatar_1.svg" alt="">
            <div class="message_sub">
                <div class="user_time">
                    <span>User Name</span>
                    <span>Uhrzeit</span>
                </div>
                <div class="message">{{fsDataThreadService.current_message}}</div>
                <div class="emoji_main">
                    <div *ngFor="let item of 0" class="emoji_count" matTooltip="{{react_user}} hat reagiert">
                        <ngx-emoji class="center" [emoji]="" size="24"></ngx-emoji>
                        <span></span>
                    </div>
                </div>
            </div>
            <emoji-mart [class.d_block]="emojiPicker_open && picker_index == -1" class="emoji_picker"
                (emojiClick)="addEmojiToMessage($event)"
                [style]="{ position: 'absolute', top: '0px', right: '0px' }"></emoji-mart>
        </div>


        <div class="comment_div"
            [class.row_reverse]="fsDataThreadService.comments[i].user == authenticationService.userData.user_name" *ngFor="let comment of fsDataThreadService.comments; let i = index">
            <div [class.show_edit_comment]="edit_comment && fsDataThreadService.comments[i].user == authenticationService.userData.user_name && edit_comment_index == i" class="edit_comment" (click)="openEditComment(i)">
                <div class="edit_hover" (click)="openEditComment(i)" (click)="stopPropagation($event)">
                    <span>Nachricht bearbeiten</span>
                </div>
                <div class="edit_hover" (click)="openDeleteComment(i)" (click)="stopPropagation($event)">
                    <span>Nachricht l√∂schen</span>
                </div>
            </div>
            <emoji-mart [class.d_block]="emojiPicker_open && picker_index == i" class="emoji_picker"
                (emojiClick)="addEmoji($event, i)"
                [style]="{ position: 'absolute', top: '0px', left: '0px' }"></emoji-mart>
            <div *ngIf="fsDataThreadService.comments[i].user != authenticationService.userData.user_name"
                (click)="openEmojiPicker(i)" (click)="stopPropagation($event)" class="reaction_emojy">
                <div class="emojy"><img src="/assets/img/icons/add_reaction.png" alt=""></div>
            </div>
            <div *ngIf="fsDataThreadService.comments[i].user == authenticationService.userData.user_name"
                (click)="openEmojiPicker(i)" (click)="stopPropagation($event)" class="reaction_emojy_user">
                <div class="emojy">
                    <img src="/assets/img/icons/add_reaction.png" alt="">
                </div>
                <div class="emojy" (click)="openEditCommentMenu(i)" (click)="stopPropagation($event)">
                    <img src="/assets/img/icons/more_vert.png">
                </div>
            </div>
            <img src="/assets/img/small_avatar/avatar_1.svg" alt="">
            <div class="message_sub">
                <div class="user_time">
                    <span>{{fsDataThreadService.comments[i].user}}</span>
                    <span>{{fsDataThreadService.getTimeSince(fsDataThreadService.comments[i].time.seconds)}}</span>
                </div>
                <div class="message"
                    [class.message_user]="fsDataThreadService.comments[i].user == authenticationService.userData.user_name">
                    {{fsDataThreadService.comments[i].comment}}
                    <div *ngIf="fsDataThreadService.comments[i].text_edited">(bearbeitet)</div>
                </div>
                <div class="emoji_main">
                    <div *ngFor="let emoji of fsDataThreadService.comments[i].emoji_data; let j = index"
                        (mouseenter)="showReactUsers(i, j)" (mouseleave)="closeShowReactUsers(i, j)" class="emoji_count"
                        (click)="addOrRemoveEmoji(i, j)">
                        <div class="react_user"
                            [class.show_react_user]="comment_index == i && emoji_index == j && hovered_emoji">
                            <ngx-emoji class="center" [emoji]="fsDataThreadService.comments[i].emoji_data[j].emoji"
                                size="24"></ngx-emoji>

                            <span>{{fsDataThreadService.comments[i].emoji_data[j]?.react_users?.join(' und ')}}</span>
                            <div *ngIf="fsDataThreadService.comments[i].emoji_data[j]?.react_users?.length < 2">hat
                                reagiert</div>
                            <div *ngIf="fsDataThreadService.comments[i].emoji_data[j]?.react_users?.length > 1">haben
                                reagiert</div>

                        </div>
                        <ngx-emoji class="center" [emoji]="fsDataThreadService.comments[i].emoji_data[j].emoji"
                            size="24"></ngx-emoji>
                        <span>{{fsDataThreadService.comments[i].emoji_data[j].count}}</span>

                    </div>
                </div>
            </div>
        </div>


        <div class="type_message">
            <div class="z_index">
                <emoji-mart [class.d_block]="emojiPicker_open && picker_index == -2" class="emoji_picker"
                    (emojiClick)="addEmojitoTextarea($event)"></emoji-mart>
            </div>
            <textarea type="text" [(ngModel)]="comment_value" placeholder="Antworten..."></textarea>
            <div class="icons_main">
                <div class="icons">
                    <div class="plus">
                        <div class="hover"><img src="/assets/img/icons/add.png" alt=""></div>
                    </div>
                    <div class="hover"><img src="/assets/img/icons/sentiment_satisfied.png"
                            (click)="openEmojiPicker(-2)" (click)="stopPropagation($event)"></div>
                    <div class="hover"><img src="/assets/img/icons/alternate_email.png" alt=""></div>
                </div>
            </div>
            <img [class.inactive]="comment_value.length < 1" class="send_button" src="/assets/img/icons/send (1).png"
                alt="" (click)="postComment()">
        </div>
    </div>
