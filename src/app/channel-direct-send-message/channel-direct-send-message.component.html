<!--------------------------------------------------- upload -------------------------------------------------------->

<div class="upload_main">
    <div *ngFor="let file of uploadService.upload_array.file_name; let i = index" class="upload_content">
        <img class="file_image" src="/assets/img/File-Types/{{uploadService.upload_array.file_extension[i]}}.png">
        <div style="z-index: 1;">{{file}}</div>
        <div class="progress_load" [style.width.%]="uploadService.uploadProgressArray[i]"></div>
        <div class="delete_file">
            <img (click)="uploadService.removeFile(i)" src="/assets/img/icons/close.png" alt="">
        </div>
    </div>
</div>

<section class="write-new-message">

    <!--------------------------------------------------- textarea ------------------------------------------------------->

    <textarea #messageTextarea name="" id="" cols="10" rows="2" [placeholder]="chatService.messageToPlaceholder"
        [(ngModel)]="msgService.messageText" (keydown)="msgService.checkIfEmpty()"
        (keyup)="msgService.checkIfEmpty()"></textarea>
    <div class="extend-send-message">
        <div class="extend-message">

            <div [class.show_edit_comment]="open_attachment_menu" class="edit_comment">
                <input id="fileInput" type="file" (change)="uploadService.onFileSelected($event)">
                <label class="menu_button" for="fileInput">Datei anhÃ¤ngen</label>
            </div>
            <div class="at_user_div" *ngIf="open_users">
                <div>
                    <div class="user" *ngFor="let user of chatService.at_users; let i = index"
                        (click)="addUserToTextarea(i)">
                        <img class="user_img" [src]="user.avatar">
                        <div>{{user.user_name}}</div>
                    </div>
                </div>

            </div>

            <div class="plus" (click)="openAttachmentMenu()" (click)="stopPropagation($event)">
                <div class="hover"><mat-icon>add</mat-icon></div>
            </div>

            <div class="parting-line"></div>
            <div class="z_index">
                <emoji-mart [class.d_flex]="emojiService.emojiPicker_open && emojiService.picker_index == -2"
                    class="emoji_picker" (emojiClick)="addEmojitoTextarea($event);">
                </emoji-mart>
                <mat-icon (click)="toggleEmojiPicker(); emojiService.openEmojiPicker(-2);">mood</mat-icon>
            </div>
            <mat-icon (click)="openUsers()">alternate_email</mat-icon>
        </div>
        <button (click)="onSendClick()" [ngClass]="{'ready-to-send': msgService.readyToSend }"
            [disabled]="!msgService.readyToSend" class="send-message">
            <mat-icon>send</mat-icon>
        </button>
    </div>
</section>